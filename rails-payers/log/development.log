  [1m[35m (391.4ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (366.5ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35m (25.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (14.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20220419192109)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "payer" character varying, "points" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220419192109"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-19 19:23:21.791319"], ["updated_at", "2022-04-19 19:23:21.791319"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.6ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("payer", "points", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["payer", "DANNON"], ["points", 1000], ["created_at", "2022-04-19 19:23:32.954656"], ["updated_at", "2022-04-19 19:23:32.954656"]]
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("payer", "points", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["payer", "UNILEVER"], ["points", 10], ["created_at", "2022-04-19 19:23:32.965534"], ["updated_at", "2022-04-19 19:23:32.965534"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("payer", "points", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["payer", "MILLER COORS"], ["points", 0], ["created_at", "2022-04-19 19:23:32.973918"], ["updated_at", "2022-04-19 19:23:32.973918"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
Started GET "/" for 127.0.0.1 at 2022-04-19 12:29:50 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as */*
  Rendering /usr/share/rvm/gems/ruby-2.7.4/gems/railties-7.0.2.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/share/rvm/gems/ruby-2.7.4/gems/railties-7.0.2.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.4ms | Allocations: 667)
Completed 200 OK in 13ms (Views: 5.6ms | ActiveRecord: 0.0ms | Allocations: 6306)


Started GET "/point_total" for 127.0.0.1 at 2022-04-19 12:30:02 -0700
Processing by TransactionsController#point_total as */*
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 1946)


  
NameError (undefined local variable or method `debug' for #<TransactionsController:0x000000000086d8>
Did you mean?  debugger):
  
app/controllers/transactions_controller.rb:6:in `point_total'
Started GET "/point_total" for 127.0.0.1 at 2022-04-19 12:30:12 -0700
Processing by TransactionsController#point_total as */*
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:6:in `point_total'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `point_total'
Completed 500 Internal Server Error in 98418ms (ActiveRecord: 3.8ms | Allocations: 216582)


  
SystemExit (exit):
  
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `exit'
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `point_total'
app/controllers/transactions_controller.rb:6:in `point_total'
Started GET "/point_total" for 127.0.0.1 at 2022-04-19 12:32:43 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#point_total as */*
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:7:in `point_total'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 4.2ms | Allocations: 17925)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (41.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (43.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (318.2ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (353.4ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "payer" character varying, "points" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220419192109)[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:05:44.000479"], ["updated_at", "2022-04-20 22:05:44.000479"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "14d1597e4370b7c164daf986f1081765e68f76c0"], ["created_at", "2022-04-20 22:05:44.022560"], ["updated_at", "2022-04-20 22:05:44.022560"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (17.3ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "payer" character varying, "points" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220419192109)[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:05:44.101634"], ["updated_at", "2022-04-20 22:05:44.101634"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-20 22:05:44.108806"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "14d1597e4370b7c164daf986f1081765e68f76c0"], ["created_at", "2022-04-20 22:05:44.116429"], ["updated_at", "2022-04-20 22:05:44.116429"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20220420213925)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213925"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePayers (20220420213934)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213934"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.6ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.4ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-20 22:05:52.501302"], ["updated_at", "2022-04-20 22:05:52.501302"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-20 22:05:52.508124"], ["updated_at", "2022-04-20 22:05:52.508124"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.6ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-20 22:05:52.518585"], ["updated_at", "2022-04-20 22:05:52.518585"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-20 22:05:52.525272"], ["updated_at", "2022-04-20 22:05:52.525272"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-20 22:05:52.530541"], ["updated_at", "2022-04-20 22:05:52.530541"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (82.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (46.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (286.3ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (300.0ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "payer" character varying, "points" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (13.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:06:30.264979"], ["updated_at", "2022-04-20 22:06:30.264979"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "aca5d1c61c38a332c38285a02b20a5113bd285dc"], ["created_at", "2022-04-20 22:06:30.275683"], ["updated_at", "2022-04-20 22:06:30.275683"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "payer" character varying, "points" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:06:30.386605"], ["updated_at", "2022-04-20 22:06:30.386605"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-20 22:06:30.394489"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "aca5d1c61c38a332c38285a02b20a5113bd285dc"], ["created_at", "2022-04-20 22:06:30.402492"], ["updated_at", "2022-04-20 22:06:30.402492"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.5ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-20 22:06:30.459909"], ["updated_at", "2022-04-20 22:06:30.459909"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-20 22:06:30.465594"], ["updated_at", "2022-04-20 22:06:30.465594"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-20 22:06:30.476355"], ["updated_at", "2022-04-20 22:06:30.476355"]]
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-20 22:06:30.483986"], ["updated_at", "2022-04-20 22:06:30.483986"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-20 22:06:30.490269"], ["updated_at", "2022-04-20 22:06:30.490269"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePayers (20220420213934)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "payers"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220420213934"]]
  [1m[36mTRANSACTION (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20220420213925)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220420213925"]]
  [1m[36mTRANSACTION (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20220419192109)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (1.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220419192109"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20220419192109)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.3ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220419192109"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220420213925)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213925"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePayers (20220420213934)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213934"]]
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.5ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-20 22:07:48.089328"], ["updated_at", "2022-04-20 22:07:48.089328"]]
  [1m[36mTRANSACTION (11.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-20 22:07:48.104295"], ["updated_at", "2022-04-20 22:07:48.104295"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.7ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-20 22:07:48.112305"], ["updated_at", "2022-04-20 22:07:48.112305"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-20 22:07:48.120478"], ["updated_at", "2022-04-20 22:07:48.120478"]]
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-20 22:07:48.127893"], ["updated_at", "2022-04-20 22:07:48.127893"]]
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (71.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (45.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (296.1ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (331.4ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (13.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:08:48.989757"], ["updated_at", "2022-04-20 22:08:48.989757"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-20 22:08:49.002926"], ["updated_at", "2022-04-20 22:08:49.002926"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (13.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:08:49.130274"], ["updated_at", "2022-04-20 22:08:49.130274"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.5ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-20 22:08:49.138214"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-20 22:08:49.146040"], ["updated_at", "2022-04-20 22:08:49.146040"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.5ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-20 22:08:49.202820"], ["updated_at", "2022-04-20 22:08:49.202820"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-20 22:08:49.209237"], ["updated_at", "2022-04-20 22:08:49.209237"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (1.0ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-20 22:08:49.218030"], ["updated_at", "2022-04-20 22:08:49.218030"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-20 22:08:49.225498"], ["updated_at", "2022-04-20 22:08:49.225498"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-20 22:08:49.231662"], ["updated_at", "2022-04-20 22:08:49.231662"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-20 22:08:49.238775"]]
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (1.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 10], ["timestamp", "2022-04-20 22:08:50.253332"]]
  [1m[36mTRANSACTION (16.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (1.3ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 0], ["timestamp", "2022-04-20 22:08:51.285136"]]
  [1m[36mTRANSACTION (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePayers (20220420213934)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "payers"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220420213934"]]
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20220420213925)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220420213925"]]
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20220419192109)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE "transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20220419192109"]]
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (76.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (47.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (396.3ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (442.6ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:10:30.837463"], ["updated_at", "2022-04-20 22:10:30.837463"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "58addd46498439b0246039134434c38aae6c70d3"], ["created_at", "2022-04-20 22:10:30.852736"], ["updated_at", "2022-04-20 22:10:30.852736"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (15.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:10:30.941474"], ["updated_at", "2022-04-20 22:10:30.941474"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-20 22:10:30.951367"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "58addd46498439b0246039134434c38aae6c70d3"], ["created_at", "2022-04-20 22:10:30.959938"], ["updated_at", "2022-04-20 22:10:30.959938"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransactions (20220419192109)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220419192109"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20220420213925)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213925"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePayers (20220420213934)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220420213934"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1237995450151383420)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (82.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (43.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (411.0ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (464.5ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:10:44.020364"], ["updated_at", "2022-04-20 22:10:44.020364"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-20 22:10:44.030338"], ["updated_at", "2022-04-20 22:10:44.030338"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (16.4ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-20 22:10:44.153976"], ["updated_at", "2022-04-20 22:10:44.153976"]]
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.4ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-20 22:10:44.163021"], ["key", "environment"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-20 22:10:44.170333"], ["updated_at", "2022-04-20 22:10:44.170333"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.4ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.4ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-20 22:10:44.244386"], ["updated_at", "2022-04-20 22:10:44.244386"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-20 22:10:44.250963"], ["updated_at", "2022-04-20 22:10:44.250963"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-20 22:10:44.260371"], ["updated_at", "2022-04-20 22:10:44.260371"]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-20 22:10:44.267374"], ["updated_at", "2022-04-20 22:10:44.267374"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-20 22:10:44.273644"], ["updated_at", "2022-04-20 22:10:44.273644"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-20 22:10:44.279877"]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (1.1ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 10], ["timestamp", "2022-04-20 22:10:45.298199"]]
  [1m[36mTRANSACTION (10.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (1.1ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 0], ["timestamp", "2022-04-20 22:10:46.323897"]]
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/users/1" for 127.0.0.1 at 2022-04-20 15:16:31 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `show'
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 20195)


Started GET "/users/2" for 127.0.0.1 at 2022-04-20 15:16:37 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `show'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 608)


Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:16:47 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `show'
Completed 404 Not Found in 2ms (ActiveRecord: 0.5ms | Allocations: 549)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/users_controller.rb:4:in `show'
Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:17:46 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:5:in `show'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:5:in `show'
Completed 404 Not Found in 11ms (ActiveRecord: 3.0ms | Allocations: 3384)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=3):
  
app/controllers/users_controller.rb:5:in `show'
Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:17:53 -0700
  
NameError (undefined local variable or method `render_not_found' for UsersController:Class):
  
app/controllers/users_controller.rb:2:in `<class:UsersController>'
app/controllers/users_controller.rb:1:in `<main>'
Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:18:43 -0700
  
NameError (undefined local variable or method `render_not_found' for UsersController:Class):
  
app/controllers/users_controller.rb:2:in `<class:UsersController>'
app/controllers/users_controller.rb:1:in `<main>'
Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:18:58 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:5:in `show'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 3034)


Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:19:29 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:5:in `show'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 3029)


Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:19:54 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `show'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 3025)


Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:21:17 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.8ms | Allocations: 793)


  
ActiveModel::ForbiddenAttributesError (ActiveModel::ForbiddenAttributesError):
  
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:21:29 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f0300ae4c00>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f0300ae4c00>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f0300ae4c00>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 32389ms (ActiveRecord: 2.9ms | Allocations: 138556)


  
SystemExit (exit):
  
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `exit'
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `create'
app/controllers/users_controller.rb:8:in `create'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:24:42 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fd098c850>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 422 Unprocessable Entity in 25ms (ActiveRecord: 3.4ms | Allocations: 20835)


  
ActiveRecord::RecordInvalid (Validation failed: Name can't be blank):
  
app/controllers/users_controller.rb:9:in `create'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:24:58 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fd40bfdb8>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 4.7ms | Allocations: 1515)


Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:26:56 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fcc13eb48>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.9ms | Allocations: 1470)


  
ArgumentError (wrong number of arguments (given 1, expected 2)):
  
app/controllers/application_controller.rb:6:in `render_error'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:27:09 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fe00e7960>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 791)


  
ArgumentError (wrong number of arguments (given 1, expected 2)):
  
app/controllers/application_controller.rb:6:in `render_error'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:27:25 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fd102eeb0>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 2.9ms | Allocations: 41716)


  
SystemStackError (stack level too deep):
  
app/controllers/application_controller.rb:7:in `render_error'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:27:41 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fd0e59ba8>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 1521)


Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:28:38 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fe0cfaec8>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.7ms | Allocations: 41696)


  
SystemStackError (stack level too deep):
  
app/controllers/application_controller.rb:7:in `render_error'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:28:53 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fe0cf7b60>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 1545)


Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:29:13 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fd09e3e48>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.8ms | Allocations: 3308)


  
NoMethodError (undefined method `action' for #<UsersController:0x00000000022808>
Did you mean?  action_name):
  
app/controllers/application_controller.rb:7:in `render_error'
Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:29:18 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fe05440f8>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 1486)


Started POST "/users/" for 127.0.0.1 at 2022-04-20 15:30:34 -0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{}}
[31mUnpermitted parameter: :user. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f8fcc1a6888>, params: {"controller"=>"users", "action"=>"create", "user"=>{}} }[0m
Completed 422 Unprocessable Entity in 5ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 1504)


Started GET "/users/3" for 127.0.0.1 at 2022-04-20 15:30:39 -0700
Processing by UsersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:4:in `show'
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1270)


Started GET "/payers/3" for 127.0.0.1 at 2022-04-20 15:31:57 -0700
Processing by PayersController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/payers_controller.rb:3:in `show'
Completed 200 OK in 21ms (Views: 0.4ms | ActiveRecord: 6.5ms | Allocations: 3729)


Started GET "/payers/5" for 127.0.0.1 at 2022-04-20 15:32:01 -0700
Processing by PayersController#show as */*
  Parameters: {"id"=>"5"}
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/payers_controller.rb:3:in `show'
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 556)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-20 15:34:18 -0700
  
ActionController::RoutingError (uninitialized constant TransactionController
Did you mean?  TransactionsController):
  
Started GET "/payers" for 127.0.0.1 at 2022-04-20 15:34:35 -0700
  
ActionController::RoutingError (No route matches [GET] "/payers"):
  
Started GET "/payers" for 127.0.0.1 at 2022-04-20 15:35:15 -0700
Processing by PayersController#index as */*
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers"[0m
  â†³ app/controllers/payers_controller.rb:4:in `index'
Completed 200 OK in 12ms (Views: 4.2ms | ActiveRecord: 3.8ms | Allocations: 3854)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-20 15:35:50 -0700
  
ActionController::RoutingError (uninitialized constant TransactionController
Did you mean?  TransactionsController):
  
Started POST "/add_transaction" for 127.0.0.1 at 2022-04-20 15:36:02 -0700
  
ActionController::RoutingError (uninitialized constant TransactionController
Did you mean?  TransactionsController):
  
Started POST "/add_transaction" for 127.0.0.1 at 2022-04-20 15:36:10 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer_id"=>3, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "payer_id"=>3, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
Completed 204 No Content in 12ms (ActiveRecord: 1.7ms | Allocations: 14643)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-20 15:45:39 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer_id"=>3, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "payer_id"=>3, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
Completed 204 No Content in 0ms (Allocations: 33)


Started GET "/transactions" for 127.0.0.1 at 2022-04-25 14:09:24 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
Completed 200 OK in 63ms (Views: 37.3ms | ActiveRecord: 9.8ms | Allocations: 36418)


Started GET "/transactions/1" for 127.0.0.1 at 2022-04-25 14:10:47 -0700
Processing by TransactionsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `show'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 3.4ms | Allocations: 3918)


Started GET "/transactions/3" for 127.0.0.1 at 2022-04-25 14:10:50 -0700
Processing by TransactionsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `show'
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms | Allocations: 593)


Started GET "/transactions/10" for 127.0.0.1 at 2022-04-25 14:10:54 -0700
Processing by TransactionsController#show as */*
  Parameters: {"id"=>"10"}
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `show'
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 565)


Started GET "/transactions" for 127.0.0.1 at 2022-04-25 14:10:59 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `index'
Completed 200 OK in 33ms (Views: 26.6ms | ActiveRecord: 6.3ms | Allocations: 11431)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:12:54 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "asjlfgh"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "INBEV"], ["LIMIT", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mPayer Create (11.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "INBEV"], ["created_at", "2022-04-25 21:18:10.036476"], ["updated_at", "2022-04-25 21:18:10.036476"]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
Completed 500 Internal Server Error in 458322ms (ActiveRecord: 22.8ms | Allocations: 361554)


  
SystemExit (exit):
  
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `exit'
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `add_transaction'
app/controllers/transactions_controller.rb:14:in `add_transaction'
Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:21:05 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:14:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:15:in `add_transaction'
Completed   in 33007ms (ActiveRecord: 8.2ms | Allocations: 132697)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:21:47 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:14:in `add_transaction'
  [1m[36mPayer Load (0.8ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:15:in `add_transaction'
[31mUnpermitted parameters: :user_id, :payer, :transaction. Context: { controller: TransactionsController, action: add_transaction, request: #<ActionDispatch::Request:0x00007f0804a31ac0>, params: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "controller"=>"transactions", "action"=>"add_transaction", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}} }[0m
[31mUnpermitted parameters: :user_id, :payer, :transaction. Context: { controller: TransactionsController, action: add_transaction, request: #<ActionDispatch::Request:0x00007f0804a31ac0>, params: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "controller"=>"transactions", "action"=>"add_transaction", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}} }[0m
Completed   in 121529ms (ActiveRecord: 9.4ms | Allocations: 353868)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:24:04 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:14:in `add_transaction'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:15:in `add_transaction'
[31mUnpermitted parameters: :user_id, :transaction. Context: { controller: TransactionsController, action: add_transaction, request: #<ActionDispatch::Request:0x00007f9c011aec68>, params: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "controller"=>"transactions", "action"=>"add_transaction", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}} }[0m
[31mUnpermitted parameters: :user_id, :payer, :points, :timestamp, :transaction. Context: { controller: TransactionsController, action: add_transaction, request: #<ActionDispatch::Request:0x00007f9c011aec68>, params: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "controller"=>"transactions", "action"=>"add_transaction", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}} }[0m
Completed 500 Internal Server Error in 89187ms (ActiveRecord: 8.0ms | Allocations: 261565)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x00000000009240>):
  
app/controllers/transactions_controller.rb:17:in `add_transaction'
Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:25:36 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:14:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:15:in `add_transaction'
Completed 500 Internal Server Error in 1456ms (ActiveRecord: 0.7ms | Allocations: 62373)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x00000000009308>):
  
app/controllers/transactions_controller.rb:17:in `add_transaction'
Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:26:13 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:14:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:15:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:17:in `add_transaction'
  [1m[36mTransaction Create (1.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2020-11-02 14:00:00"]]
  â†³ app/controllers/transactions_controller.rb:17:in `add_transaction'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:17:in `add_transaction'
Completed 200 OK in 39ms (Views: 0.6ms | ActiveRecord: 11.6ms | Allocations: 13712)


Started GET "/transactions" for 127.0.0.1 at 2022-04-25 14:26:41 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (1.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:22:in `index'
Completed 200 OK in 74ms (Views: 52.8ms | ActiveRecord: 15.7ms | Allocations: 17139)


Started GET "/total_points/1" for 127.0.0.1 at 2022-04-25 14:27:29 -0700
  
ActionController::RoutingError (No route matches [GET] "/total_points/1"):
  
Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 14:30:23 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
Completed 204 No Content in 31ms (ActiveRecord: 6.0ms | Allocations: 20056)


Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 14:30:37 -0700
  
SyntaxError (/home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/users_controller.rb:11: syntax error, unexpected `end'
    end
    ^~~
/home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/users_controller.rb:26: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/users_controller.rb:11: syntax error, unexpected `end'
app/controllers/users_controller.rb:26: syntax error, unexpected end-of-input, expecting `end'
app/controllers/users_controller.rb:11: syntax error, unexpected `end'
app/controllers/users_controller.rb:26: syntax error, unexpected end-of-input, expecting `end'
Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 14:30:40 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:24:in `find_user'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:9:in `total_points'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ (rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `total_points'
Completed 204 No Content in 67509ms (ActiveRecord: 6.7ms | Allocations: 153177)


Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 14:32:07 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:24:in `find_user'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 2860ms (Views: 0.2ms | ActiveRecord: 9.0ms | Allocations: 69372)


Started POST "/add_transaction" for 127.0.0.1 at 2022-04-25 14:35:08 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>1, "payer"=>"DANNON", "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z", "transaction"=>{"user_id"=>1, "points"=>1000, "timestamp"=>"2020-11-02T14:00:00Z"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `add_transaction'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:8:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2020-11-02 14:00:00"]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
Completed 200 OK in 31ms (Views: 0.5ms | ActiveRecord: 11.7ms | Allocations: 9802)


Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 14:35:13 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1220)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:37:05 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "transaction"=>{"points"=>2500}}
[31mUnpermitted parameter: :transaction. Context: { controller: TransactionsController, action: spend_points, request: #<ActionDispatch::Request:0x00007fb67d2103c8>, params: {"points"=>2500, "controller"=>"transactions", "action"=>"spend_points", "transaction"=>{"points"=>2500}} }[0m
Completed 204 No Content in 40415ms (ActiveRecord: 1.4ms | Allocations: 98523)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:37:47 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "test"=>"test", "transaction"=>{"points"=>2500}}
[31mUnpermitted parameters: :test, :transaction. Context: { controller: TransactionsController, action: spend_points, request: #<ActionDispatch::Request:0x00007fb67d29df98>, params: {"points"=>2500, "test"=>"test", "controller"=>"transactions", "action"=>"spend_points", "transaction"=>{"points"=>2500}} }[0m
Completed 204 No Content in 38285ms (ActiveRecord: 0.0ms | Allocations: 63030)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:38:26 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "test"=>"test", "user"=>"test", "transaction"=>{"points"=>2500}}
[31mUnpermitted parameters: :test, :user, :transaction. Context: { controller: TransactionsController, action: spend_points, request: #<ActionDispatch::Request:0x00007fb67ce66ce0>, params: {"points"=>2500, "test"=>"test", "user"=>"test", "controller"=>"transactions", "action"=>"spend_points", "transaction"=>{"points"=>2500}} }[0m
Completed 204 No Content in 9903ms (ActiveRecord: 0.0ms | Allocations: 61916)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:38:37 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "test"=>"test", "user"=>"test", "transaction"=>{"points"=>2500}}
[31mUnpermitted parameters: :test, :transaction. Context: { controller: TransactionsController, action: spend_points, request: #<ActionDispatch::Request:0x00007fb67cc05c08>, params: {"points"=>2500, "test"=>"test", "user"=>"test", "controller"=>"transactions", "action"=>"spend_points", "transaction"=>{"points"=>2500}} }[0m
[31mUnpermitted parameters: :test, :transaction. Context: { controller: TransactionsController, action: spend_points, request: #<ActionDispatch::Request:0x00007fb67cc05c08>, params: {"points"=>2500, "test"=>"test", "user"=>"test", "controller"=>"transactions", "action"=>"spend_points", "transaction"=>{"points"=>2500}} }[0m
Completed 204 No Content in 30540ms (ActiveRecord: 3.9ms | Allocations: 89660)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:39:23 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
Completed 204 No Content in 13165ms (ActiveRecord: 0.0ms | Allocations: 59313)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:39:37 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 ORDER BY "transactions"."timestamp" ASC[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 ORDER BY "timestampc" ASC[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
Completed 204 No Content in 105144ms (ActiveRecord: 7.1ms | Allocations: 137671)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:41:24 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:21:in `spend_points'
Completed 204 No Content in 724686ms (ActiveRecord: 5.4ms | Allocations: 304874)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 14:53:31 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:24:in `spend_points'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:29:in `spend_points'
Completed 500 Internal Server Error in 28437ms (ActiveRecord: 14.5ms | Allocations: 1265957)


  
SystemExit (exit):
  
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `exit'
(rdbg)//home/rothberry/dev/projects/fetch/backend-payers/rails-payers/app/controllers/transactions_controller.rb:1:in `spend_points'
app/controllers/transactions_controller.rb:25:in `spend_points'
Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 15:09:15 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:24:in `spend_points'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 15:09:45 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:24:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `spend_points'
Completed 200 OK in 52ms (Views: 0.4ms | ActiveRecord: 10.0ms | Allocations: 35202)


Started POST "/spend_points" for 127.0.0.1 at 2022-04-25 15:10:07 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>2500, "user_id"=>1, "transaction"=>{"user_id"=>1, "points"=>2500}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:24:in `spend_points'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:28:in `spend_points'
  [1m[36mCACHE Payer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `spend_points'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 4053)


Started GET "/transactions" for 127.0.0.1 at 2022-04-25 15:10:14 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE Payer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 2.2ms | Allocations: 8661)


Started GET "/users/1/total_points" for 127.0.0.1 at 2022-04-25 15:10:23 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1193)


Started GET "/transactions" for 127.0.0.1 at 2022-04-25 15:10:55 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mPayer Load (2.9ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:43:in `index'
Completed 200 OK in 35ms (Views: 23.0ms | ActiveRecord: 8.5ms | Allocations: 11020)


Started GET "/payers" for 127.0.0.1 at 2022-04-25 15:13:50 -0700
Processing by PayersController#index as */*
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers"[0m
  â†³ app/controllers/payers_controller.rb:4:in `index'
Completed 200 OK in 12ms (Views: 3.7ms | ActiveRecord: 3.5ms | Allocations: 3925)


Started GET "/total_points" for ::1 at 2022-04-26 11:49:16 -0700
  
ActiveRecord::NoDatabaseError (We could not find your database: rails_payers_development. Which can be found in the database configuration file located at config/database.yml.

To resolve this issue:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.0.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:81:in `rescue in new_client'
activerecord (7.0.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
activerecord (7.0.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'
activerecord (7.0.2.3) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'
activerecord (7.0.2.3) lib/active_record/connection_handling.rb:313:in `retrieve_connection'
activerecord (7.0.2.3) lib/active_record/connection_handling.rb:280:in `connection'
activerecord (7.0.2.3) lib/active_record/migration.rb:613:in `connection'
activerecord (7.0.2.3) lib/active_record/migration.rb:608:in `build_watcher'
activerecord (7.0.2.3) lib/active_record/migration.rb:590:in `block in call'
activerecord (7.0.2.3) lib/active_record/migration.rb:589:in `synchronize'
activerecord (7.0.2.3) lib/active_record/migration.rb:589:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.2.3) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.2.3) lib/rails/rack/logger.rb:36:in `call_app'
railties (7.0.2.3) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.2.3) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.2.3) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.2.3) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.2.3) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/server_timing.rb:20:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.2.3) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.2.3) lib/rails/engine.rb:530:in `call'
puma (5.6.4) lib/puma/configuration.rb:252:in `call'
puma (5.6.4) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.4) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.4) lib/puma/request.rb:76:in `handle_request'
puma (5.6.4) lib/puma/server.rb:441:in `process_client'
puma (5.6.4) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[35m (185.9ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (88.0ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35m (24.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (24.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (90.0ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (56.0ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 18:54:09.896755"], ["updated_at", "2022-04-26 18:54:09.896755"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 18:54:09.904568"], ["updated_at", "2022-04-26 18:54:09.904568"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 18:54:09.961785"], ["updated_at", "2022-04-26 18:54:09.961785"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-26 18:54:09.965963"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 18:54:09.969664"], ["updated_at", "2022-04-26 18:54:09.969664"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.2ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-26 18:54:10.032069"], ["updated_at", "2022-04-26 18:54:10.032069"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-26 18:54:10.035520"], ["updated_at", "2022-04-26 18:54:10.035520"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-26 18:54:10.039998"], ["updated_at", "2022-04-26 18:54:10.039998"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.2ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-26 18:54:10.047355"], ["updated_at", "2022-04-26 18:54:10.047355"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.1ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-26 18:54:10.049813"], ["updated_at", "2022-04-26 18:54:10.049813"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-26 18:54:10.051866"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 10], ["timestamp", "2022-04-26 18:54:11.069408"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 0], ["timestamp", "2022-04-26 18:54:12.080375"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/total_points" for ::1 at 2022-04-26 11:54:54 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/total_points"):
  
Started GET "/users/1/total_points" for ::1 at 2022-04-26 11:56:34 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 51ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 29195)


Started POST "/add_transaction" for ::1 at 2022-04-26 12:01:50 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"DANNON", "timestamp"=>"2022-04-26 19:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 5000], ["timestamp", "2022-04-26 19:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 3.9ms | Allocations: 9593)


Started POST "/add_transaction" for ::1 at 2022-04-26 12:04:56 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"STOKER", "timestamp"=>"2022-04-26 20:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "STOKER"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "STOKER"], ["created_at", "2022-04-26 19:04:56.844792"], ["updated_at", "2022-04-26 19:04:56.844792"]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 4], ["points", 5000], ["timestamp", "2022-04-26 20:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 31ms (Views: 0.4ms | ActiveRecord: 8.1ms | Allocations: 13786)


Started GET "/users/1/total_points" for ::1 at 2022-04-26 12:05:02 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 1239)


Started POST "/spend_points" for ::1 at 2022-04-26 12:06:17 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"points"=>"5000"}
Completed 404 Not Found in 5ms (Views: 0.3ms | ActiveRecord: 1.5ms | Allocations: 2351)


Started POST "/spend_points" for ::1 at 2022-04-26 12:06:52 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.1ms | Allocations: 1511)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:24:in `>'
app/controllers/transactions_controller.rb:24:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:07:12 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:17:in `spend_points'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.2ms | Allocations: 3724)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:25:in `>'
app/controllers/transactions_controller.rb:25:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:08:03 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.6ms | Allocations: 3728)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:26:in `>'
app/controllers/transactions_controller.rb:26:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:08:27 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.2ms | Allocations: 3679)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:26:in `>'
app/controllers/transactions_controller.rb:26:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:08:43 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 2.5ms | Allocations: 5780)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:26:in `>'
app/controllers/transactions_controller.rb:26:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:09:25 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.2ms | Allocations: 5718)


  
ArgumentError (comparison of String with 0 failed):
  
app/controllers/transactions_controller.rb:27:in `>'
app/controllers/transactions_controller.rb:27:in `spend_points'
Started POST "/spend_points" for ::1 at 2022-04-26 12:09:43 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `spend_points'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 12991)


Started GET "/transactions" for ::1 at 2022-04-26 12:10:17 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 1.2ms | Allocations: 4825)


  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (8182.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (33.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (44.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (126.5ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (108.2ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:12:37.880501"], ["updated_at", "2022-04-26 19:12:37.880501"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:12:37.886549"], ["updated_at", "2022-04-26 19:12:37.886549"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:12:37.930186"], ["updated_at", "2022-04-26 19:12:37.930186"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-26 19:12:37.933850"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:12:37.937015"], ["updated_at", "2022-04-26 19:12:37.937015"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.4ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.2ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-26 19:12:37.983970"], ["updated_at", "2022-04-26 19:12:37.983970"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-26 19:12:37.986970"], ["updated_at", "2022-04-26 19:12:37.986970"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-26 19:12:37.990962"], ["updated_at", "2022-04-26 19:12:37.990962"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-26 19:12:37.993541"], ["updated_at", "2022-04-26 19:12:37.993541"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.2ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-26 19:12:37.996281"], ["updated_at", "2022-04-26 19:12:37.996281"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-26 19:12:37.998682"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 2000], ["timestamp", "2022-04-26 19:12:39.016861"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 3000], ["timestamp", "2022-04-26 19:12:40.030363"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
Started GET "/transactions" for ::1 at 2022-04-26 12:13:22 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `index'
Completed 200 OK in 55ms (Views: 31.0ms | ActiveRecord: 9.9ms | Allocations: 31263)


Started POST "/spend_points" for ::1 at 2022-04-26 12:13:37 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 7092)


Started POST "/spend_points" for ::1 at 2022-04-26 12:15:28 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:39:in `spend_points'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 5.7ms | Allocations: 11907)


Started POST "/spend_points" for ::1 at 2022-04-26 12:16:32 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:39:in `spend_points'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 6.9ms | Allocations: 11903)


Started POST "/spend_points" for ::1 at 2022-04-26 12:16:56 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:40:in `spend_points'
Completed 200 OK in 21381ms (Views: 0.2ms | ActiveRecord: 7.1ms | Allocations: 199348)


Started POST "/spend_points" for ::1 at 2022-04-26 12:17:25 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:40:in `spend_points'
Completed 200 OK in 122462ms (Views: 0.2ms | ActiveRecord: 6.5ms | Allocations: 237549)


Started POST "/spend_points" for ::1 at 2022-04-26 12:19:30 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:39:in `spend_points'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 7.8ms | Allocations: 11959)


Started GET "/transactions" for ::1 at 2022-04-26 12:20:33 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
Completed 200 OK in 18ms (Views: 10.3ms | ActiveRecord: 4.6ms | Allocations: 9474)


Started POST "/spend_points" for ::1 at 2022-04-26 12:20:37 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTransaction Update (0.4ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 1]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:39:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 500], ["id", 2]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 4.7ms | Allocations: 8728)


Started GET "/transactions" for ::1 at 2022-04-26 12:20:40 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.7ms | Allocations: 3182)


Started GET "/transactions" for ::1 at 2022-04-26 12:21:28 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."timestamp" ASC[0m
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:50:in `index'
Completed 200 OK in 23ms (Views: 13.4ms | ActiveRecord: 4.7ms | Allocations: 9590)


Started POST "/spend_points" for ::1 at 2022-04-26 12:21:41 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:35:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 2]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:39:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 1000], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 4.2ms | Allocations: 9363)


Started POST "/spend_points" for ::1 at 2022-04-26 12:22:47 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:27:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:38:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:45:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:45:in `spend_points'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:45:in `spend_points'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 8.0ms | Allocations: 12812)


Started POST "/spend_points" for ::1 at 2022-04-26 12:25:36 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"2500"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 422 Unprocessable Entity in 14ms (Views: 0.1ms | ActiveRecord: 3.5ms | Allocations: 6630)


Started GET "/transactions" for ::1 at 2022-04-26 12:25:43 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."timestamp" ASC[0m
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
Completed 200 OK in 15ms (Views: 10.5ms | ActiveRecord: 3.7ms | Allocations: 7055)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5487.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (25.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (23.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (56.6ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:26:17.109867"], ["updated_at", "2022-04-26 19:26:17.109867"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:26:17.117410"], ["updated_at", "2022-04-26 19:26:17.117410"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:26:17.168519"], ["updated_at", "2022-04-26 19:26:17.168519"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-26 19:26:17.172077"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:26:17.174965"], ["updated_at", "2022-04-26 19:26:17.174965"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.2ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-26 19:26:17.221746"], ["updated_at", "2022-04-26 19:26:17.221746"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-26 19:26:17.224631"], ["updated_at", "2022-04-26 19:26:17.224631"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-26 19:26:17.228603"], ["updated_at", "2022-04-26 19:26:17.228603"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.2ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-26 19:26:17.231300"], ["updated_at", "2022-04-26 19:26:17.231300"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-26 19:26:17.234065"], ["updated_at", "2022-04-26 19:26:17.234065"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-26 19:26:17.236870"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 2000], ["timestamp", "2022-04-26 19:26:18.250152"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 3000], ["timestamp", "2022-04-26 19:26:19.260170"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Started GET "/transactions" for ::1 at 2022-04-26 12:26:28 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."timestamp" ASC[0m
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:60:in `index'
Completed 200 OK in 55ms (Views: 20.3ms | ActiveRecord: 6.6ms | Allocations: 31283)


Started POST "/spend_points" for ::1 at 2022-04-26 12:26:39 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"7500"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 422 Unprocessable Entity in 12ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 5713)


Started POST "/spend_points" for ::1 at 2022-04-26 12:26:45 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"5500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 1]]
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:42:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTransaction Update (0.3ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 2]]
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:46:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 500], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:49:in `spend_points'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 8385)


Started POST "/spend_points" for ::1 at 2022-04-26 12:26:51 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"5500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 1176)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (32.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (32.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (77.8ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (91.7ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:27:04.152955"], ["updated_at", "2022-04-26 19:27:04.152955"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:27:04.158715"], ["updated_at", "2022-04-26 19:27:04.158715"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:27:04.205734"], ["updated_at", "2022-04-26 19:27:04.205734"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-26 19:27:04.209599"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:27:04.212743"], ["updated_at", "2022-04-26 19:27:04.212743"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.4ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.2ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-26 19:27:04.258340"], ["updated_at", "2022-04-26 19:27:04.258340"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-26 19:27:04.261169"], ["updated_at", "2022-04-26 19:27:04.261169"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.5ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-26 19:27:04.265097"], ["updated_at", "2022-04-26 19:27:04.265097"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-26 19:27:04.268087"], ["updated_at", "2022-04-26 19:27:04.268087"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-26 19:27:04.270555"], ["updated_at", "2022-04-26 19:27:04.270555"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-26 19:27:04.273622"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 2000], ["timestamp", "2022-04-26 19:27:05.289231"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 3000], ["timestamp", "2022-04-26 19:27:06.298264"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/spend_points" for ::1 at 2022-04-26 12:30:18 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"5500"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:26:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 1]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 2]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:41:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 500], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
Completed 200 OK in 55ms (Views: 0.3ms | ActiveRecord: 10.4ms | Allocations: 43008)


Started POST "/add_transaction" for ::1 at 2022-04-26 12:30:27 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"STOKER", "timestamp"=>"2022-04-26 20:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "STOKER"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "STOKER"], ["created_at", "2022-04-26 19:30:27.270049"], ["updated_at", "2022-04-26 19:30:27.270049"]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 4], ["points", 5000], ["timestamp", "2022-04-26 20:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 4806)


Started GET "/transactions" for ::1 at 2022-04-26 12:30:31 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."timestamp" ASC[0m
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.5ms | Allocations: 4071)


Started POST "/spend_points" for ::1 at 2022-04-26 12:30:45 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"3500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:26:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:41:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 2000], ["id", 4]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 5908)


Started GET "/transactions" for ::1 at 2022-04-26 12:30:49 -0700
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."timestamp" ASC[0m
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:54:in `index'
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 1.0ms | Allocations: 4070)


Started GET "/users/1/total_points" for ::1 at 2022-04-26 12:30:52 -0700
Processing by UsersController#total_points as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `find_user'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1151)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 12:32:39 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `find_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `find_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `find_user'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" INNER JOIN "transactions" ON "payers"."id" = "transactions"."payer_id" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
Completed 204 No Content in 72663ms (ActiveRecord: 12.0ms | Allocations: 270610)


Started POST "/add_transaction" for ::1 at 2022-04-26 12:34:01 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"DANNON", "timestamp"=>"2022-04-26 19:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 5000], ["timestamp", "2022-04-26 19:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 2986)


Started POST "/add_transaction" for ::1 at 2022-04-26 12:34:07 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"DANNON", "timestamp"=>"2022-04-26 19:01:29.448636 UTC", "points"=>"7500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 7500], ["timestamp", "2022-04-26 19:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 2885)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 12:34:13 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `find_user'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `map'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 AND "transactions"."payer_id" = $2[0m  [["user_id", 1], ["payer_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1 AND "transactions"."payer_id" = $2[0m  [["user_id", 1], ["payer_id", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `points_balance'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" ORDER BY "payers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" ORDER BY "payers"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `points_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."payer_id" = $1[0m  [["payer_id", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `points_balance'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 AND "transactions"."payer_id" = $2[0m  [["user_id", 1], ["payer_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 AND "transactions"."payer_id" = $2 /* loading for inspect */ LIMIT $3[0m  [["user_id", 1], ["payer_id", 1], ["LIMIT", 11]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mCACHE Transaction Sum (0.0ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1 AND "transactions"."payer_id" = $2[0m  [["user_id", 1], ["payer_id", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `points_balance'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 ORDER BY "transactions"."payer_id" ASC[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" INNER JOIN "payers" ON "payers"."id" = "transactions"."payer_id" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (1.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" INNER JOIN "payers" ON "payers"."id" = "transactions"."payer_id" INNER JOIN "users" ON "users"."id" = "transactions"."user_id" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT payers.* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT transactions.* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.8ms)[0m  [1m[34mSELECT transactions.*, SUM(transaction.points) FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT transactions.*, SUM(transaction.points) as total_points FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" INNER JOIN "payers" ON "payers"."id" = "transactions"."payer_id" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (1.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 GROUP BY "payer"[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 GROUP BY "payer_ID"[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 GROUP BY "payer_ud"[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" INNER JOIN "payers" ON "payers"."id" = "transactions"."payer_id" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 ORDER BY "transactions"."payer_id" ASC[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1 ORDER BY "transactions"."payer_id" ASC[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:17:in `points_balance'
Completed 204 No Content in 1181840ms (ActiveRecord: 11.5ms | Allocations: 1272719)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 12:55:15 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:34:in `find_user'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `block in points_balance'
Completed 204 No Content in 125248ms (ActiveRecord: 6.7ms | Allocations: 791207)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 12:57:25 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:38:in `find_user'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed   in 26025ms (ActiveRecord: 9.5ms | Allocations: 270023)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (40.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_development"[0m
  [1m[35m (39.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rails_payers_test"[0m
  [1m[35m (159.6ms)[0m  [1m[35mCREATE DATABASE "rails_payers_development" ENCODING = 'unicode'[0m
  [1m[35m (75.9ms)[0m  [1m[35mCREATE DATABASE "rails_payers_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:57:57.388670"], ["updated_at", "2022-04-26 19:57:57.388670"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:57:57.397268"], ["updated_at", "2022-04-26 19:57:57.397268"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payers" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "payers" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "transactions" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "user_id" bigint, "payer_id" bigint, "points" integer, "timestamp" timestamp(6))[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_payer_id" ON "transactions" ("payer_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_user_id" ON "transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220420213934)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220419192109),
(20220420213925);

[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-04-26 19:57:57.450892"], ["updated_at", "2022-04-26 19:57:57.450892"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2022-04-26 19:57:57.454894"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "f3fd3b9c6585b0172c169b892ebc72e8109a6490"], ["created_at", "2022-04-26 19:57:57.458841"], ["updated_at", "2022-04-26 19:57:57.458841"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTransaction Delete All (0.5ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mPayer Delete All (0.2ms)[0m  [1m[31mDELETE FROM "payers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_1"], ["created_at", "2022-04-26 19:57:57.510658"], ["updated_at", "2022-04-26 19:57:57.510658"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "test_user_2"], ["created_at", "2022-04-26 19:57:57.513619"], ["updated_at", "2022-04-26 19:57:57.513619"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "DANNON"], ["created_at", "2022-04-26 19:57:57.518085"], ["updated_at", "2022-04-26 19:57:57.518085"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.3ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "UNILEVER"], ["created_at", "2022-04-26 19:57:57.521232"], ["updated_at", "2022-04-26 19:57:57.521232"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayer Create (0.2ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "MILLER COORS"], ["created_at", "2022-04-26 19:57:57.524105"], ["updated_at", "2022-04-26 19:57:57.524105"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 1000], ["timestamp", "2022-04-26 19:57:57.526750"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 2], ["points", 2000], ["timestamp", "2022-04-26 19:57:58.540252"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 3], ["points", 3000], ["timestamp", "2022-04-26 19:57:59.548527"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/users/1/points_balance" for ::1 at 2022-04-26 12:58:04 -0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:38:in `find_user'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ (rdbg)//Users/rothberry/dev/proj/backend-payers/rails-payers/app/controllers/users_controller.rb:1:in `block in points_balance'
  [1m[36mPayer Load (10.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
Completed 204 No Content in 155417ms (ActiveRecord: 19.0ms | Allocations: 800410)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:00:43 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:40:in `find_user'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.4ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
  [1m[36mPayer Load (0.5ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:21:in `block in points_balance'
Completed 200 OK in 7900ms (Views: 0.3ms | ActiveRecord: 9.0ms | Allocations: 371886)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:01:01 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 7.2ms | Allocations: 12420)


Started POST "/add_transaction" for ::1 at 2022-04-26 13:01:07 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"STOKER", "timestamp"=>"2022-04-26 20:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "STOKER"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mPayer Create (0.4ms)[0m  [1m[32mINSERT INTO "payers" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "STOKER"], ["created_at", "2022-04-26 20:01:07.776378"], ["updated_at", "2022-04-26 20:01:07.776378"]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 4], ["points", 5000], ["timestamp", "2022-04-26 20:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 1.6ms | Allocations: 4957)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:01:10 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 3503)


Started POST "/spend_points" for ::1 at 2022-04-26 13:01:15 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"3500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:26:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 1]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 2]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:41:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.1ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 2500], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 2.3ms | Allocations: 8042)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:01:19 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 3484)


Started POST "/add_transaction" for ::1 at 2022-04-26 13:01:25 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"DANNON", "timestamp"=>"2022-04-26 19:01:29.448636 UTC", "points"=>"7500"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.3ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 7500], ["timestamp", "2022-04-26 19:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 2888)


Started POST "/add_transaction" for ::1 at 2022-04-26 13:01:26 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"STOKER", "timestamp"=>"2022-04-26 20:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "STOKER"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 4], ["points", 5000], ["timestamp", "2022-04-26 20:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 2883)


Started POST "/add_transaction" for ::1 at 2022-04-26 13:01:28 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"DANNON", "timestamp"=>"2022-04-26 19:01:29.448636 UTC", "points"=>"7500"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "DANNON"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 1], ["points", 7500], ["timestamp", "2022-04-26 19:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.9ms | Allocations: 2889)


Started POST "/add_transaction" for ::1 at 2022-04-26 13:01:30 -0700
Processing by TransactionsController#add_transaction as */*
  Parameters: {"user_id"=>"1", "payer"=>"STOKER", "timestamp"=>"2022-04-26 20:01:29.448636 UTC", "points"=>"5000"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `add_transaction'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."name" = $1 LIMIT $2[0m  [["name", "STOKER"], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:10:in `add_transaction'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("user_id", "payer_id", "points", "timestamp") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["payer_id", 4], ["points", 5000], ["timestamp", "2022-04-26 20:01:29.448636"]]
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:11:in `add_transaction'
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 2885)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:01:32 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 5608)


Started POST "/spend_points" for ::1 at 2022-04-26 13:01:37 -0700
Processing by TransactionsController#spend_points as */*
  Parameters: {"user_id"=>"1", "points"=>"3500"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:18:in `spend_points'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."points") FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/user.rb:8:in `total_points'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:26:in `spend_points'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:37:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 0], ["id", 3]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:41:in `spend_points'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTransaction Update (0.2ms)[0m  [1m[33mUPDATE "transactions" SET "points" = $1 WHERE "transactions"."id" = $2[0m  [["points", 4000], ["id", 4]]
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/transactions_controller.rb:44:in `spend_points'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 5937)


Started GET "/users/1/points_balance" for ::1 at 2022-04-26 13:01:40 -0700
Processing by UsersController#points_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:39:in `find_user'
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/controllers/users_controller.rb:19:in `points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.1ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mPayer Load (0.2ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
  [1m[36mCACHE Payer Load (0.0ms)[0m  [1m[34mSELECT "payers".* FROM "payers" WHERE "payers"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:20:in `block in points_balance'
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 5607)


